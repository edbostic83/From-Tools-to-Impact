<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>From Tools to Impact – The Living Lab</title>
    <meta name="description" content="Work with AI like a strategic partner: choose the right platform, change habits, show evidence." />
    <meta name="theme-color" content="#1A202C" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet" />
    
    <script>
    const $ = (id) => document.getElementById(id); 
    (function () {
        const s = document.createElement('script');
        s.src = 'https://cdn.tailwindcss.com?plugins=forms,typography&v=20251028'; 
        s.onload = () => console.log('Tailwind CDN loaded successfully');
        
        // Keep the unpkg fallback
        s.onerror = () => {
            console.warn('Tailwind CDN blocked; loading fallback CSS');
            const l = document.createElement('link');
            l.rel = 'stylesheet';
            l.href = 'https://unpkg.com/tailwindcss@3.4.5/dist/tailwind.min.css'; 
            document.head.appendChild(l);
        };
        
        document.head.appendChild(s);
    })();
    </script>
    <meta property="og:title" content="From Tools to Impact – The Living Lab" />
    <meta property="og:description" content="Work with AI like a strategic partner: choose the right platform, change habits, show evidence." />

    <style>
        /* ----------------- THEME TOKENS ----------------- */
        :root{
            --navy:#1A202C;
            --gold:#FDD681;
            --gold2:#EBC46B;
            --text-dark:#1F2937;
            --text-muted:#4B5563;
            --bg-light:#F5F7FB; /* Slightly off-white page background */
            --card-light:#FFFFFF;
            --border-light:#E5E7EB;

            /* Decorative Colors */
            --leaf:#8FD18C;
            --mint:#B7F5C8;
            --grid:rgba(255,255,255,.04);
            --vine:rgba(143,209,140,.18);
            --beaker:rgba(253,214,129,.18);
        }

        /* ===== 1. LIGHT THEME DEFAULTS (html:not(.decor)) ===== */
        html:not(.decor) body { 
            background: var(--bg-light) !important;
            color: var(--text-dark) !important; 
        }
        html:not(.decor) .glow { 
            background: var(--card-light) !important; 
            color: var(--text-dark) !important; 
            box-shadow: 0 1px 2px rgba(0,0,0,.06); 
            border:1px solid var(--border-light); 
        }
        html:not(.decor) .header-bg  { background:#FFFFFF !important; }
        html:not(.decor) .sparkle    { background:none !important; }

        /* Output boxes: readable dark text on light background */
        html:not(.decor) #planner_output,
        html:not(.decor) #dp_output, /* Corrected for the JS */
        html:not(.decor) #pf_output,
        html:not(.decor) #risen_output,
        html:not(.decor) #story_output,
        html:not(.decor) #ten-day_output,
        html:not(.decor) #process-plug_output,
        html:not(.decor) #sell_output {
            background:#FFFFFF !important; 
            color:#111827 !important; 
            border:1px solid var(--border-light) !important;
        }

        /* Input/Select Fields on Light */
        html.light input, html.light textarea, html.light select {
            background: #FFFFFF !important;
            color: #111827 !important;
            border-color: #D1D5DB !important;
        }
        
        /* FIX: Ensure gray text is readable on light cards */
        .text-gray-400, .text-gray-500 { color: #4B5563 !important; } /* Tailwind gray-600 */
        .glow h2, .glow p, .glow li, .glow a { color: var(--text-dark); }

        /* [FIX 6: Help chip contrast (light mode legibility)] */
        @media (prefers-color-scheme: light) {
          .chip { color: #111827; }              /* Tailwind gray-900 */
          .chip-tip { color: #111827; }
        }

        /* ===== 2. DARK/DECOR MODE OVERRIDES (html.decor) ===== */
        html.decor body { background: #2D3748 !important; color: #F7FAFC !important; }
        html.decor .header-bg  { background: var(--navy) !important; }
        html.decor .sparkle    {
            background:
                radial-gradient(1000px 400px at 10% -10%, rgba(253,214,129,.15), transparent 60%),
                radial-gradient(800px 400px at 90% 10%, rgba(26,32,44,.25), transparent 55%),
                linear-gradient(180deg, #1A202C 0%, #1A202C 40%, #202736 100%) !important;
        }
        html.decor .glow { 
            background: #1A202C !important; 
            color: #F7FAFC !important; 
            box-shadow: 0 10px 30px rgba(0,0,0,.5), 0 0 0 1px rgba(253,214,129,.08) !important;
            border: 0 !important;
        }
        /* Restore dark button look when decor is on */
        html.decor .bg-gray-700.hover\:bg-gray-600 { 
            background: #4A5568 !important; 
            border-color: #4A5568 !important; 
            color: #F7FAFC !important; 
        }

        /* ===== 3. GLOBAL STYLING & DECORATIONS (Shared) ===== */

        /* [FIX 4: Anchor scroll offset so headings don’t hide] */
        main section { 
            scroll-margin-top: 96px; 
        }

        /* Decorative Elements */
        .lab-divider{ position:relative; height:18px; margin:28px 0; }
        .lab-divider::before{ content:""; position:absolute; inset:auto 0; top:8px; height:1px; background:linear-gradient(90deg, transparent, var(--beaker), transparent); }
        .lab-divider::after{ content:""; position:absolute; left:50%; top:50%; transform:translate(-50%, -50%); width:44px; height:44px; border-radius:9999px; background: radial-gradient(circle at 50% 50%, var(--beaker), transparent 60%), url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="%23FDD681" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"><path d="M9 3v4.5l-4.5 7.8A3 3 0 0 0 7 20h10a3 3 0 0 0 2.5-4.7L15 7.5V3"/><path d="M6 14h12"/></svg>') center/22px 22px no-repeat; opacity:.35; }

        /* General Styling */
        .lab-vines{ position:fixed; inset:0; z-index:-1; pointer-events:none; }
        .lab-vines svg{ position:absolute; opacity:.45; filter:saturate(110%); }
        .lab-vines .vine-tl{ top:-20px; left:-10px; width:min(36vw,520px); }
        .lab-vines .vine-br{ bottom:-30px; right:-10px; width:min(40vw,640px); transform:scaleX(-1) rotate(-2deg); }
        .mobile-nav { 
             /* Backdrop for mobile nav - semi-transparent dark */
            background: rgba(0,0,0,0.35); 
        }
        .mobile-panel {
            /* Inner panel on mobile nav */
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            width: 80%;
            max-width: 320px;
            background: var(--card-light);
            padding: 1.5rem;
        }
        .glow { box-shadow: 0 10px 30px rgba(0,0,0,.5), 0 0 0 1px rgba(253,214,129,.1); }
        
        /* Buttons/Inputs */
        input, textarea, select { border: 1px solid #D1D5DB; }
        button.gold-btn { background:var(--gold); color:var(--navy); font-weight:700; border:0; }
        .lift:hover { transform: translateY(-2px); box-shadow: 0 12px 22px rgba(0,0,0,.4) }

        /* Toast Styles (minimal example) */
        #toast-container {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 5000; /* High z-index to cover everything */
        }
        .toast {
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            margin-bottom: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
            color: white;
            opacity: 0;
            transition: opacity 0.3s ease-out;
            font-size: 0.875rem;
        }
        .toast.show { opacity: 1; }
        .toast.success { background-color: #10B981; } /* Emerald-500 */
        .toast.error { background-color: #EF4444; }   /* Red-500 */
        .toast.info { background-color: #3B82F6; }    /* Blue-500 */
    </style>
</head>

<body class=""> 
    <div id="toast-container"></div>

    <div class="lab-vines" aria-hidden="true">
        <svg class="vine-tl" viewBox="0 0 800 600" fill="none">
            <path d="M20,120 C120,40 280,80 360,40 420,10 520,20 600,60" stroke="rgba(183,245,200,.35)" stroke-width="14" stroke-linecap="round"/>
            <path d="M80,180 C180,120 300,140 400,90" stroke="rgba(143,209,140,.55)" stroke-width="8" stroke-linecap="round"/>
            <g fill="rgba(143,209,140,.55)">
                <circle cx="120" cy="160" r="6"/><circle cx="220" cy="110" r="5"/><circle cx="310" cy="120" r="5"/>
            </g>
        </svg>
        <svg class="vine-br" viewBox="0 0 800 600" fill="none">
            <path d="M740,520 C640,560 520,540 460,560 400,580 320,560 240,520" stroke="rgba(183,245,200,.35)" stroke-width="14" stroke-linecap="round"/>
            <path d="M680,460 C580,520 460,500 360,550" stroke="rgba(143,209,140,.55)" stroke-width="8" stroke-linecap="round"/>
            <g fill="rgba(143,209,140,.55)">
                <circle cx="620" cy="490" r="6"/><circle cx="520" cy="540" r="5"/><circle cx="430" cy="530" r="5"/>
            </g>
        </svg>
    </div>
    
    <a href="#main" class="sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 focus:bg-white focus:text-[--navy] focus:px-3 focus:py-2 focus:rounded">Skip to main content</a>

    <div class="md:hidden header-bg sparkle text-white">
        <div class="flex items-center justify-between px-4 py-3">
            <a href="#home" class="font-extrabold text-lg">The Living Lab</a>
            <button id="mobileOpenBtn" class="border-2 border-white rounded px-3 py-1" type="button" aria-haspopup="dialog" aria-controls="mobileNav" aria-expanded="false">Menu</button>
        </div>
    </div>

    <div id="mobileNav" class="mobile-nav hidden fixed inset-0 z-50" role="dialog" aria-modal="true" aria-label="Navigation drawer">
        <div class="mobile-panel glow">
            <div class="flex items-center justify-between">
                <div class="font-extrabold text-[--gold] text-lg">The Living Lab</div>
                <button id="mobileCloseBtn" class="p-2" type="button" aria-label="Close menu">✕</button>
                </div>
            <nav class="mt-3 space-y-1 text-sm">
                <a class="block px-3 py-2 rounded hover:bg-gray-200" href="#about">What is this?</a>
                <a class="block px-3 py-2 rounded hover:bg-gray-200" href="#guided">Guided Mode</a>
                <a class="block px-3 py-2 rounded hover:bg-gray-200" href="#framework">Impact Ladder</a>
                <a class="block px-3 py-2 rounded hover:bg-gray-200" href="#planner">Planner</a>
                <a class="block px-3 py-2 rounded hover:bg-gray-200" href="#data-prep">Data Prep Coach</a>
                <a class="block px-3 py-2 rounded hover:bg-gray-200" href="#platform-finder">AI Platform Finder</a>
                <a class="block px-3 py-2 rounded hover:bg-gray-200" href="#risen">RISEN Prompt Studio</a>
                <a class="block px-3 py-2 rounded hover:bg-gray-200" href="#story">3-Sentence Story</a>
                <a class="block px-3 py-2 rounded hover:bg-gray-200" href="#ten-day">10-Day Plan</a>
                <a class="block px-3 py-2 rounded hover:bg-gray-200" href="#process-plug">Process Plug-In</a>
                <a class="block px-3 py-2 rounded hover:bg-gray-200" href="#sell">Sell It</a>
                <a class="block px-3 py-2 rounded hover:bg-gray-200" href="#connect">Join</a>
            </nav>
        </div>
    </div>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 grid md:grid-cols-[260px_minmax(0,1fr)] gap-6 py-6">
        <aside class="hidden md:block sidebar" aria-label="Section navigation">
            <div class="rounded-xl p-4 glow">
                <div class="text-xl font-extrabold text-[--gold] mb-1">The Living Lab</div>
                <p class="text-xs text-gray-400 mb-3">From Tools to Impact</p>
                <nav class="space-y-1 text-sm">
                    <a class="block px-3 py-2 rounded hover:bg-gray-200" href="#about">What is this?</a>
                    <a class="block px-3 py-2 rounded hover:bg-gray-200" href="#guided">Guided Mode</a>
                    <a class="block px-3 py-2 rounded hover:bg-gray-200" href="#framework">Impact Ladder</a>
                    <a class="block px-3 py-2 rounded hover:bg-gray-200" href="#planner">Planner</a>
                    <a class="block px-3 py-2 rounded hover:bg-gray-200" href="#data-prep">Data Prep Coach</a>
                    <a class="block px-3 py-2 rounded hover:bg-gray-200" href="#platform-finder">AI Platform Finder</a>
                    <a class="block px-3 py-2 rounded hover:bg-gray-200" href="#risen">RISEN Prompt Studio</a>
                    <a class="block px-3 py-2 rounded hover:bg-gray-200" href="#story">3-Sentence Story</a>
                    <a class="block px-3 py-2 rounded hover:bg-gray-200" href="#ten-day">10-Day Plan</a>
                    <a class="block px-3 py-2 rounded hover:bg-gray-200" href="#process-plug">Process Plug-In</a>
                    <a class="block px-3 py-2 rounded hover:bg-gray-200" href="#sell">Sell It</a>
                    <a class="block px-3 py-2 rounded hover:bg-gray-200" href="#connect">Join</a>
                </nav>
                <div class="mt-4 pt-4 border-t border-gray-300">
                    <button id="toggle-decor" class="w-full px-3 py-1 rounded border border-gray-600 text-xs hover:bg-gray-200"
                        onclick="document.documentElement.classList.toggle('hide-decor')">
                        Toggle Decorations
                    </button>
                    <button data-decorations-toggle onclick="
                        document.documentElement.classList.toggle('decor');
                        " class="w-full mt-2 border rounded px-3 py-1 border-gray-300 text-xs hover:bg-gray-200">
                        Toggle Dark Mode
                    </button>
                </div>
            </div>
        </aside>

        <main id="main">
            <div class="lab-divider" aria-hidden="true"></div>
            <section id="home" class="header-bg sparkle text-white rounded-xl p-6 glow hero-lab">
                <h1 class="text-4xl font-extrabold mb-2 accent">From Tools to Impact</h1>
                <p class="text-lg/7 opacity-95">Turn AI into a thinking partner, not a crutch. Pick the right tool, change the habit, show the evidence.</p>
            </section>

            <div class="lab-divider" aria-hidden="true"></div>
            <section id="about" class="mt-6 bg-white rounded-xl p-6 glow card-vines">
                <div class="underline-anim mb-3"></div>
                <h2 class="text-2xl font-extrabold mb-2">What is this place? How do I use it?</h2>
                <p class="text-gray-400 mb-3">A do-it-now site for teachers, leaders, and central office. Every section tells you why it matters, what to type, and gives you something to <strong>copy, download, or email</strong>.</p>
                <ol class="list-decimal ml-5 text-sm space-y-1">
                    <li><strong>Guided Mode</strong> (choose your role). It walks you through: prompt → plan → data → platform → story → sprint.</li>
                    <li><strong>Planner</strong> locks the weekly habit (owner, cadence, outcome, standards/policy).</li>
                    <li><strong>Data Prep Coach</strong> turns a squishy idea into AI-ready spec + CSV + checklist.</li>
                    <li><strong>Platform Finder</strong> helps you pick the right category and search strings (with examples).</li>
                    <li><strong>Story</strong> makes the 3-liner; <strong>10-Day</strong> seeds realistic steps (templates included).</li>
                </ol>
                <p class="text-xs text-gray-500 mt-2">Badges: <span class="font-semibold">[Drop-in AI]</span> = paste directly into a model; [Human workflow] = use with your team.</p>
            </section>

            <div class="lab-divider" aria-hidden="true"></div>
            <section id="guided" class="mt-6 bg-white rounded-xl p-6 glow card-vines">
                <div class="flex items-center gap-2 mb-2">
                    <span class="text-xs px-2 py-1 rounded bg-yellow-100 border text-black">7 minutes</span>
                    <h2 class="text-2xl font-extrabold">Guided Mode</h2>
                </div>
                <p class="text-gray-400 mb-3">Click your role. The site pre-fills good examples and walks you through the flow.</p>
                <div class="flex flex-wrap gap-2 mb-4">
                    <button class="gold-btn lift px-4 py-2 rounded" type="button" onclick="startGuided('teacher')">Teacher</button>
                    <button class="gold-btn lift px-4 py-2 rounded" type="button" onclick="startGuided('leader')">Leader</button>
                    <button class="gold-btn lift px-4 py-2 rounded" type="button" onclick="startGuided('central')">Central Office</button>
                    <button class="gold-btn lift px-4 py-2 rounded" type="button" onclick="startGuided('coach')">SPED / EB / Coach</button>
                </div>
                <div id="guided-panel" class="hidden">
                    <div class="bg-amber-800 border-l-4 border-amber-400 p-3 rounded mb-3 text-white">
                        <p id="guided-why" class="text-sm"></p>
                    </div>
                    <div class="bg-gray-700 border rounded p-4">
                        <p class="text-sm mb-2"><strong>Step <span id="guided-step-num">1</span>:</strong> <span id="guided-step-title"></span></p>
                        <div id="guided-step-body" class="text-sm text-gray-200"></div>
                        <div class="mt-3 flex gap-2">
                            <button id="prev-guided-btn" class="px-3 py-2 rounded border" type="button" onclick="prevGuided()">Back</button>
                            <button id="next-guided-btn" class="gold-btn px-3 py-2 rounded" type="button" onclick="nextGuided()">Next</button>
                        </div>
                    </div>
                </div>
            </section>

            <div class="lab-divider" aria-hidden="true"></div>
            <section id="framework" class="mt-6 bg-white rounded-xl p-6 glow card-vines">
                <h2 class="text-2xl font-extrabold mb-1">Core Framework: The Impact Ladder</h2>
                <div class="text-sm text-gray-400 mb-3">Move from <strong>tool</strong> → <strong>use</strong> → <strong>behavior</strong> → <strong>outcome</strong> → <strong>evidence</strong>.</div>
                <div class="grid grid-cols-5 text-center text-xs font-bold text-gray-400 mb-4">
                    <div class="p-2 border-b-4 border-[--navy]">1. Tool</div>
                    <div class="p-2 border-b-4 border-[--navy]">2. Use</div>
                    <div class="p-2 border-b-4 border-[--navy]">3. Behavior</div>
                    <div class="p-2 border-b-4 border-[--navy]">4. Outcome</div>
                    <div class="p-2 border-b-4 border-[--navy]">5. Evidence</div>
                </div>
                <div class="flex gap-2 border-b pb-2">
                    <button id="tab-stu" class="px-3 py-2 border-b-2 border-[--gold] font-bold text-[--gold]" onclick="switchTab('student')">Student</button>
                    <button id="tab-lea" class="px-3 py-2 text-gray-400" onclick="switchTab('leader')">Leader</button>
                </div>
                <div id="ladder-stu" class="mt-3">
                    <div class="grid md:grid-cols-5 gap-3 text-center text-sm">
                        <div class="p-3 rounded">Flip / LLM</div>
                        <div class="p-3 rounded">Storyboard → present</div>
                        <div class="p-3 rounded">Peer feedback stems</div>
                        <div class="p-3 rounded">Confidence ↑</div>
                        <div class="p-3 rounded">Rubric growth</div>
                    </div>
                    <div class="mt-2 flex gap-2 text-sm">
                        <a href="#planner" class="underline text-[--gold]">Turn into a plan →</a>
                        <button class="px-2 py-1 border rounded bg-gray-700 hover:bg-gray-600" type="button" onclick="ladderPrefill('student')">Fill an example for me</button>
                        </div>
                </div>
                <div id="ladder-lea" class="hidden mt-3">
                    <div class="grid md:grid-cols-5 gap-3 text-center text-sm">
                        <div class="p-3 rounded">Dashboard shapes routine</div>
                        <div class="p-3 rounded">Weekly data huddle</div>
                        <div class="p-3 rounded">Collaborative solve</div>
                        <div class="p-3 rounded">Tier-1 alignment</div>
                        <div class="p-3 rounded">STAAR ↑ Audit risk ↓</div>
                    </div>
                    <div class="mt-2 flex gap-2 text-sm">
                        <a href="#planner" class="underline text-[--gold]">Make the 10‑day sprint →</a>
                        <button class="px-2 py-1 border rounded bg-gray-700 hover:bg-gray-600" type="button" onclick="ladderPrefill('leader')">Fill an example for me</button>
                    </div>
                </div>

                <details class="mt-4 p-3 rounded text-sm">
                    <summary class="font-semibold cursor-pointer">What is the Impact Ladder? (Beginner On‑Ramp)</summary>
                    <div class="mt-2 space-y-1 text-gray-400">
                        <p><strong>Tool:</strong> the app (Flip, Sheets, an LLM).</p>
                        <p><strong>Use:</strong> how you’ll use it this week (not “play with it”—be specific).</p>
                        <p><strong>Behavior:</strong> the routine people will do (peer feedback every Wed; 15‑min data huddle Fri).</p>
                        <p><strong>Outcome:</strong> a measurable change in 2–6 weeks (+1 rubric level, −30% errors).</p>
                        <p><strong>Evidence:</strong> what you’ll collect to prove it (before/after samples, counts, screenshots).</p>
                        <p class="text-xs text-gray-500">Tip: write the behavior as a calendar habit. If it’s not on a cadence, it’s not real.</p>
                    </div>
                </details>
            </section>

            <div class="lab-divider" aria-hidden="true"></div>
            <section id="planner" class="mt-6 bg-white rounded-xl p-6 glow">
                <div class="flex items-start justify-between">
                    <div>
                        <h2 class="text-2xl font-extrabold">Tool-to-Impact Planner <span class="text-xs align-middle ml-2 px-2 py-1 rounded bg-green-100 border text-white">[Human workflow]</span></h2>
                        <p class="text-sm text-gray-400 mb-2">Define the <strong>habit, owner, cadence, outcome</strong>, and the standard/policy you’re aligned to.</p>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-3 mt-3">
                    <div class="flex items-center gap-2">
                        <input id="toolName" class="p-3 border rounded w-full" placeholder="Tool (e.g., Flip, LLM, PowerSchool)" />
                        <span class="chip-wrap"><button class="chip" type="button" aria-label="Help: tool name" onclick="toggleChip(this)">?</button><span class="chip-tip">Name the main tool you’ll use weekly.</span></span>
                    </div>
                    <div class="flex items-center gap-2">
                        <input id="targetBehavior" class="p-3 border rounded w-full" placeholder="Desired behavior (e.g., peer feedback every Wed)" />
                        <span class="chip-wrap"><button class="chip" type="button" aria-label="Help: desired behavior" onclick="toggleChip(this)">?</button><span class="chip-tip">Describe the **weekly routine** people will do.</span></span>
                    </div>
                    <div class="flex items-center gap-2">
                        <input id="measurableOutcome" class="p-3 border rounded w-full" placeholder="Outcome (e.g., +5% attendance; rubric growth)" />
                        <span class="chip-wrap"><button class="chip" type="button" aria-label="Help: outcome" onclick="toggleChip(this)">?</button><span class="chip-tip">Pick **one number** you can move in 2–6 weeks.</span></span>
                    </div>
                    <div class="flex items-center gap-2">
                        <input id="owner" class="p-3 border rounded w-full" placeholder="Owner + cadence (e.g., 6th ELA team • weekly)" />
                        <span class="chip-wrap"><button class="chip" type="button" aria-label="Help: owner and cadence" onclick="toggleChip(this)">?</button><span class="chip-tip">**Who does it and how often** (cadence beats inspiration).</span></span>
                    </div>
                    <div class="md:col-span-2 flex items-center gap-2">
                        <input id="standardsPolicy" class="p-3 border rounded w-full" placeholder="Standards / Policy / Constraint (e.g., TEKS 6.4B; EDGAR; Local policy)" />
                        <span class="chip-wrap"><button class="chip" type="button" aria-label="Help: standards/policy" onclick="toggleChip(this)">?</button><span class="chip-tip">Paste the **exact rule/standard** text you’re addressing.</span></span>
                    </div>
                </div>

                <div class="mt-3 flex flex-wrap gap-2">
                    <button class="gold-btn px-4 py-2 rounded lift" type="button" onclick="generatePlanner()">Generate Plan</button>
                    <button class="px-4 py-2 rounded border lift bg-gray-700 hover:bg-gray-600" type="button" onclick="openEvidenceModal('planner')">Evidence Menu</button>
                    <button class="px-4 py-2 rounded border lift bg-gray-700 hover:bg-gray-600" type="button" onclick="downloadPlan()">Download</button>
                    <button class="px-4 py-2 rounded border lift bg-gray-700 hover:bg-gray-600" type="button" onclick="copyPlan()">Copy Raw Text</button>
                    <button class="px-4 py-2 rounded border lift bg-gray-700 hover:bg-gray-600" type="button" onclick="copyPlannerEmailPrompt()">Copy AI Polish Prompt</button>
                    <button class="px-4 py-2 rounded border lift bg-gray-700 hover:bg-gray-600" type="button" onclick="emailElementText('planner_output','Tool-to-Impact-Planner')">Email</button>
                </div>
                <div id="planner_output" class="hidden mt-4 p-4 bg-gray-50 border rounded text-sm whitespace-pre-wrap" style="font-family: monospace;"></div>
            </section>

            <div class="lab-divider" aria-hidden="true"></div>
            <section id="data-prep" class="mt-6 bg-white rounded-xl p-6 glow">
                <h2 class="text-2xl font-extrabold">Data Prep Coach <span class="text-xs ml-2 px-2 py-1 rounded bg-indigo-100 border text-white">[Drop-in AI]</span></h2>
                <p class="text-sm text-gray-400 mb-2">Turn a messy idea into an <strong>AI-ready spec + CSV + checklist</strong>. Plain-English help chips explain terms.</p>

                <div class="grid md:grid-cols-2 gap-3">
                    <div class="flex items-center gap-2">
                        <input id="dp_goal" class="p-3 border rounded w-full" placeholder="Goal/Decision (e.g., reduce no-shows by 3%)" />
                        <span class="chip-wrap"><button class="chip" type="button" aria-label="Help: goal" onclick="toggleChip(this)">?</button><span class="chip-tip">One sentence: what decision or change will this data drive?</span></span>
                    </div>
                    <div class="flex items-center gap-2">
                        <input id="dp_outcome" class="p-3 border rounded w-full" placeholder="Primary metric (e.g., daily attendance)" />
                        <span class="chip-wrap"><button class="chip" type="button" aria-label="Help: primary metric" onclick="toggleChip(this)">?</button><span class="chip-tip">Name the main number you'll track (the **primary metric**).</span></span>
                    </div>
                    <div class="flex items-center gap-2">
                        <input id="dp_unit" class="p-3 border rounded w-full" placeholder="Grain (student/day, campus/week, teacher/period)" />
                        <span class="chip-wrap"><button class="chip" type="button" aria-label="Help: grain" onclick="toggleChip(this)">?</button><span class="chip-tip">**Grain** = what one row equals (e.g., student/day).</span></span>
                    </div>
                    <div class="flex items-center gap-2">
                        <input id="dp_window" class="p-3 border rounded w-full" placeholder="Time window (e.g., last 6 weeks)" />
                        <span class="chip-wrap"><button class="chip" type="button" aria-label="Help: time window" onclick="toggleChip(this)">?</button><span class="chip-tip">How far back you’ll analyze; keep it reasonable.</span></span>
                    </div>
                    <div class="flex items-center gap-2">
                        <input id="dp_sources" class="p-3 border rounded w-full" placeholder="Sources (SIS, LMS, HRIS, Surveys)" />
                        <span class="chip-wrap"><button class="chip" type="button" aria-label="Help: sources" onclick="toggleChip(this)">?</button><span class="chip-tip">Where the data lives (tools/systems/files).</span></span>
                    </div>
                    <div class="flex items-center gap-2">
                        <input id="dp_ids" class="p-3 border rounded w-full" placeholder="Join keys/IDs (e.g., student_id, campus_id)" />
                        <span class="chip-wrap"><button class="chip" type="button" aria-label="Help: join keys" onclick="toggleChip(this)">?</button><span class="chip-tip">**Join key** = IDs that match across all files (e.g., student_id).</span></span>
                    </div>
                    <div class="flex items-center gap-2 md:col-span-2">
                        <input id="dp_fields" class="p-3 border rounded w-full" placeholder="Fields (comma-separated: student_id,date,status)" />
                        <span class="chip-wrap"><button class="chip" type="button" aria-label="Help: fields" onclick="toggleChip(this)">?</button><span class="chip-tip">**Fields** = column names you’ll need, in order.</span></span>
                    </div>
                    <div class="flex items-center gap-2">
                        <input id="dp_filters" class="p-3 border rounded w-full" placeholder="Filters (e.g., drop withdrawn; exclude alt ed)" />
                        <span class="chip-wrap"><button class="chip" type="button" aria-label="Help: filters" onclick="toggleChip(this)">?</button><span class="chip-tip">Who/what to exclude to avoid noise or bias.</span></span>
                    </div>
                    <div class="flex items-center gap-2">
                        <input id="dp_privacy" class="p-3 border rounded w-full" placeholder="Privacy (FERPA/PII/consent; anonymize IDs)" />
                        <span class="chip-wrap"><button class="chip" type="button" aria-label="Help: privacy" onclick="toggleChip(this)">?</button><span class="chip-tip">Don’t upload PII. Use anonymized IDs when possible.</span></span>
                    </div>
                    <div class="flex items-center gap-2 md:col-span-2">
                        <input id="dp_quality" class="p-3 border rounded w-full" placeholder="Quality checks (missing rules, outlier caps)" />
                        <span class="chip-wrap"><button class="chip" type="button" aria-label="Help: quality" onclick="toggleChip(this)">?</button><span class="chip-tip">Define how you’ll spot and fix messy data.</span></span>
                    </div>
                </div>

                <div class="mt-3 flex flex-wrap gap-2">
                    <button class="gold-btn px-4 py-2 rounded lift" type="button" onclick="makeDataSpec()">Make Spec</button>
                    <button class="px-4 py-2 rounded border lift bg-gray-700 hover:bg-gray-600" type="button" onclick="downloadCSVTemplate()">CSV Template</button>
                    <button class="px-4 py-2 rounded border lift bg-gray-700 hover:bg-gray-600" type="button" onclick="downloadPrepChecklist()">Checklist</button>
                    <button class="px-4 py-2 rounded border lift bg-gray-700 hover:bg-gray-600" type="button" onclick="copyDataPrompt()">Copy AI Prompt (Raw Spec)</button>
                    <button class="px-4 py-2 rounded border lift bg-gray-700 hover:bg-gray-600" type="button" onclick="copyDPExplainPrompt()">Copy AI Explain Prompt</button>
                    <button class="px-4 py-2 rounded border lift bg-gray-700 hover:bg-gray-600" type="button" onclick="emailElementText('dp_output','Data Prep Spec')">Email</button>
                </div>

                <div id="dp_output" class="hidden mt-4 p-4 bg-gray-50 border rounded text-sm whitespace-pre-wrap" style="font-family: monospace;"></div>

                <div class="mt-4 text-xs text-gray-400">
                    <p><strong>Example (attendance):</strong> fields → <code>student_id,date,present,period,reason_code</code> | grain → <code>student/day</code> | join keys → <code>student_id</code></p>
                </div>
            </section>

            <div class="lab-divider" aria-hidden="true"></div>
            <section id="platform-finder" class="mt-6 bg-white rounded-xl p-6 glow">
                <h2 class="text-2xl font-extrabold">AI Platform Finder</h2>
                <button class="gold-btn px-4 py-2 rounded lift" type="button" onclick="generatePlatformRec()">Generate Rec</button>
                <div id="pf_output" class="hidden mt-4 p-4 bg-gray-50 border rounded text-sm whitespace-pre-wrap" style="font-family: monospace;"></div>
            </section>

            <div class="lab-divider" aria-hidden="true"></div>
            <section id="connect" class="mt-6 bg-white rounded-xl p-6 glow">
                <h2 class="text-2xl font-extrabold mb-2">Connect & Join</h2>
                <p class="text-sm text-gray-700 mb-3">Share impact stories, get feedback on prompts, and bring me in for PD.</p>
                <div class="flex flex-wrap gap-2">
                    <button type="button" class="gold-btn lift px-4 py-2 rounded" onclick="openInsta()">Instagram</button>
                    <button type="button" class="px-4 py-2 rounded border lift bg-gray-700 hover:bg-gray-600" onclick="openTwitter()">Twitter/X</button>
                    <button type="button" class="px-4 py-2 rounded border lift bg-gray-700 hover:bg-gray-600" onclick="openHireMe()">Email to request PD</button>
                </div>
            </section>
        </main>
    </div>
    
    <script>
    /* ---------- tiny helpers ---------- */
    const $ = (id) => document.getElementById(id);
    const show = (id) => { const el = $(id); if (el) el.classList.remove('hidden'); };
    const text = (id) => ($(id)?.value || '').trim();
    const setOut = (id, s) => { const el = $(id); if (el) { el.textContent = s; show(id); } };
    
    // Minimal showToast implementation
    const showToast = (message, type = 'info') => {
        const container = $('toast-container');
        if (!container) return;

        const toast = document.createElement('div');
        toast.className = `toast ${type}`;
        toast.textContent = message;
        
        container.appendChild(toast);
        
        // Show then hide
        requestAnimationFrame(() => {
            toast.classList.add('show');
        });

        setTimeout(() => {
            toast.classList.remove('show');
            // Remove from DOM after transition
            setTimeout(() => toast.remove(), 300);
        }, 3000); 
    };
    
    // [FIX 2: Bullet-proof the download helper + add toasts]
    const dl = (filename, text) => {
      try {
        const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = filename;
        document.body.appendChild(a);
        a.click();
        a.remove();
        URL.revokeObjectURL(url);
        showToast(`Downloaded: ${filename}`, 'success');
      } catch (e) {
        console.error(e);
        showToast('Download failed.', 'error');
      }
    };
    
    const copyTxt = async (s) => { 
        try { 
            await navigator.clipboard.writeText(s); 
            showToast('Copied.', 'success'); 
        } catch { 
            showToast('Copy failed. Check permissions.', 'error'); 
        } 
    };
    
    const mail = (subject, body) => { location.href = `mailto:edbostic83@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`; };
    
    /* ---------- help chips ---------- */
    window.toggleChip = (btn) => {
      const wrap = btn.closest('.chip-wrap'); if (!wrap) return;
      // Simple toggle to show the tip
      wrap.classList.toggle('show');
      // Hide after a timeout
      setTimeout(() => wrap.classList.remove('show'), 3500);
    };

    /* ---------- Impact Ladder tabs (stub functions) ---------- */
    window.switchTab = (who) => {
        const stu = $('ladder-stu'), lea = $('ladder-lea'), tabStu = $('tab-stu'), tabLea = $('tab-lea');
        if (who==='student') {
             stu?.classList.remove('hidden'); lea?.classList.add('hidden');
             tabStu?.classList.add('border-b-2','border-[--gold]','font-bold','text-[--gold]'); tabStu?.classList.remove('text-gray-400');
             tabLea?.classList.remove('border-b-2','border-[--gold]','font-bold','text-[--gold]'); tabLea?.classList.add('text-gray-400');
        } else {
             lea?.classList.remove('hidden'); stu?.classList.add('hidden');
             tabLea?.classList.add('border-b-2','border-[--gold]','font-bold','text-[--gold]'); tabLea?.classList.remove('text-gray-400');
             tabStu?.classList.remove('border-b-2','border-[--gold]','font-bold','text-[--gold]'); tabStu?.classList.add('text-gray-400');
        }
    };
    window.ladderPrefill = (who) => {
        const plan = who === 'student' ? {
            toolName: 'Flip / LLM',
            targetBehavior: 'Peer feedback every Wednesday',
            measurableOutcome: '+1 rubric level in 4 weeks',
            owner: '6th ELA team • weekly'
        } : {
            toolName: 'Data dashboard',
            targetBehavior: '15-min weekly data huddle',
            measurableOutcome: '+5% STAAR item mastery in 6 weeks',
            owner: 'Campus ILT • Fridays'
        };
        $('toolName') && ($('toolName').value = plan.toolName);
        $('targetBehavior') && ($('targetBehavior').value = plan.targetBehavior);
        $('measurableOutcome') && ($('measurableOutcome').value = plan.measurableOutcome);
        $('owner') && ($('owner').value = plan.owner);
        showToast(`Planner pre-filled with ${who} example.`, 'info');
    };

    /* ---------- Planner ---------- */
    window.generatePlanner = () => {
      const plan = [
        `Tool: ${text('toolName') || '(name the app/platform)'}`,
        `Use → Habit: ${text('targetBehavior') || '(what people will do, on a cadence)'}`,
        `Outcome (2–6 wks): ${text('measurableOutcome') || '(one measurable change)'}`,
        `Owner + Cadence: ${text('owner') || '(who + how often)'}`,
        `Standards/Policy: ${text('standardsPolicy') || '(paste exact wording: TEKS/EDGAR/local)'}`,
      ].join('\n');
      setOut('planner_output', plan); 
    };
    window.plannerExplain = window.generatePlanner; // Use the same function for "Generate Plan"
    window.openEvidenceModal = (id) => {
      alert('Evidence ideas:\n• Before/after artifacts\n• Counts (submissions, completions)\n• Short surveys or rubric snapshots\n• Screenshots/links to the work');
    };
    window.downloadPlan   = () => dl('tool-to-impact-plan.txt', $('planner_output')?.textContent || '');
    window.copyPlan       = () => copyTxt($('planner_output')?.textContent || '');
    window.copyPlannerEmailPrompt = () => copyTxt(`You are an editor. Take this rough plan and expand it into a professional email for a principal, focusing on the measurable outcome. Plan: \n\n${$('planner_output')?.textContent || '(fill the form first)'}`);
    window.emailElementText = (id, subject) => mail(subject, $(id)?.textContent || '');

    /* ---------- Data Prep Coach ---------- */
    window.makeDataSpec = () => {
      const spec = [
        `Goal/Decision: ${text('dp_goal')}`,
        `Primary metric: ${text('dp_outcome')}`,
        `Grain: ${text('dp_unit')}`,
        `Window: ${text('dp_window')}`,
        `Sources: ${text('dp_sources')}`,
        `Join keys: ${text('dp_ids')}`,
        `Fields: ${text('dp_fields')}`,
        `Filters: ${text('dp_filters')}`,
        `Privacy: ${text('dp_privacy')}`,
        `Quality: ${text('dp_quality')}`
      ].join('\n');
      setOut('dp_output', spec); // [FIX 1: ID Mismatch Fix]
    };
    window.dpExplain = window.makeDataSpec; // Use the same function for "Make Spec"

    window.downloadCSVTemplate = () => {
      const cols = (text('dp_fields') || 'student_id,date,present,period,reason_code').split(/\s*,\s*/).join(',');
      dl('template.csv', cols + '\n');
    };

    window.downloadPrepChecklist = () => {
      const ck = `Checklist
[ ] Fields named and ordered
[ ] Grain matches question
[ ] IDs consistent across tables
[ ] Filters declared
[ ] Privacy (no PII in uploads)
[ ] Quality checks (missing/outliers)`;
      dl('data-prep-checklist.txt', ck);
    };

    window.copyDataPrompt = () => {
      const p = `You are a data prep coach. Using the spec below, generate:
1) a schema with column names/types,
2) sample rows,
3) a quality-check list.

Spec:
${$('dp_output')?.textContent || '(fill the form first)'}`; // [FIX 1: ID Mismatch Fix]
      copyTxt(p);
    };

    window.copyDPExplainPrompt = () => {
        const p = `You are an analyst. Take this data spec and explain to a non-technical principal what the data plan is, why these fields matter, and how this will drive their goal. Spec: \n\n${$('dp_output')?.textContent || '(fill the form first)'}`;
        copyTxt(p);
    };

    /* ---------- Platform Finder (stub functions) ---------- */
    window.generatePlatformRec = () => {
        const rec = `Goal: Create a quick presentation from rough notes.
Outputs: slides, document
Constraints: Low-cost, low-skill, private data.
Try: Gamma.app (for quick slides) or Claude/ChatGPT (for drafting the text).
Search string: "create presentation from notes low-cost education"`;
        setOut('pf_output', rec);
    };

    /* ---------- Guided Mode (stub functions) ---------- */
    const guided = {
      teacher: ['Pick tool', 'Write habit', 'Set outcome', 'Choose evidence'],
      leader:  ['Pick dashboard', 'Schedule huddles', 'Name metric movement', 'Decide artifacts'],
      central: ['Pick workflow', 'Cadence + owners', 'Risk/Policy', 'Evidence'],
      coach: ['Pick intervention', 'Track frequency', 'Measure lift', 'Observe skill transfer']
    };
    let gWho = 'teacher', gStep = 0;
    const guidedWhy = {
        teacher: 'Aim for behavior change, not “played with a tool.”',
        leader: 'Tiny routines > giant plans. Ship a cadence.',
        central: 'Lock a weekly habit that survives leadership churn.',
        coach: 'Focus on observable student skill transfer.'
    };

    window.startGuided = (who) => {
      gWho = who; gStep = 0;
      $('guided-panel')?.classList.remove('hidden');
      $('guided-why').textContent = guidedWhy[who] || guidedWhy.teacher;
      window.nextGuided();
    };
    window.nextGuided = () => {
      const steps = guided[gWho]; if (!steps) return;
      $('guided-step-num').textContent = gStep+1;
      $('guided-step-title').textContent = steps[gStep];
      $('guided-step-body').textContent = 'Use the fields below to fill this step; advance when you’ve written a concrete, observable behavior.';
      gStep = (gStep + 1) % steps.length;
    };
    window.prevGuided = () => { 
        gStep = Math.max(0, gStep-2); // Subtract 2, then nextGuided adds 1 to get previous step
        window.nextGuided(); 
    };

    /* ---------- Connect buttons (Instagram/Twitter/Email) - [FIX 5: External links with feedback] ---------- */
    window.openInsta = () => {
      try {
        const newWindow = window.open('https://instagram.com/cultureaintjustcupcaskes', '_blank', 'noopener');
        if (newWindow) showToast('Opening Instagram…', 'info');
        else showToast('Popup blocked. Check your browser settings.', 'error');
      } catch {
        showToast('Popup blocked. Check your browser settings.', 'error');
      }
    };
    window.openTwitter = () => {
      try {
        const newWindow = window.open('https://twitter.com/Msedbostic', '_blank', 'noopener');
        if (newWindow) showToast('Opening X (Twitter)…', 'info');
        else showToast('Popup blocked. Check your browser settings.', 'error');
      } catch {
        showToast('Popup blocked. Check your browser settings.', 'error');
      }
    };
    window.openHireMe = () => {
      const body = `Hello Elizabeth,%0D%0A%0D%0AI'm interested in PD/consulting.%0D%0A%0D%0ARole/Audience:%0D%0AGoal/Outcome:%0D%0ADates/Timeline:%0D%0AConstraints (FERPA, cost, etc.):%0D%0A%0D%0AThanks!`;
      location.href = `mailto:edbostic83@gmail.com?subject=PD/Consulting%20Inquiry&body=${body}`;
      showToast('Opening your email client…', 'info');
    };

    /* ---------- Mobile Nav - [FIX 3: Mobile menu open/close] ---------- */
    (() => {
      const panel = $('mobileNav');
      const openBtn = $('mobileOpenBtn');
      const closeBtn = $('mobileCloseBtn');
    
      const openNav = () => {
        if (!panel) return;
        panel.classList.remove('hidden');
        document.body.style.overflow = 'hidden';
        openBtn?.setAttribute('aria-expanded', 'true');
      };
      const closeNav = () => {
        if (!panel) return;
        panel.classList.add('hidden');
        document.body.style.overflow = '';
        openBtn?.setAttribute('aria-expanded', 'false');
      };
    
      openBtn?.addEventListener('click', openNav);
      closeBtn?.addEventListener('click', closeNav);
    
      // Close on ESC
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') closeNav();
      });
    
      // Close if clicking backdrop
      panel?.addEventListener('click', (e) => {
        // Only close if the click target is the panel itself (the backdrop)
        if (e.target === panel) closeNav(); 
        // Also close if a link is clicked inside the panel
        if (e.target.tagName === 'A' && e.target.closest('#mobileNav')) closeNav();
      });
    })();
    </script>
</body>
</html>
